<html>
  <head>
    <title>그래프탐색 - 인접리스트</title>
    <script>
      function solution(n, arr) {
        // 1번 정점 → n번 정점으로 갈 수 있는 모든 경로의 개수
        let answer = 0; // 완성된 경로 개수
        let graph = Array.from(Array(n + 1), () => Array());
        // let graph = [ [], [], [], [], [], [] ];
        let ch = Array.from({ length: n + 1 }, () => 0);
        // let ch = [0, 0, 0, 0, 0, 0]; (방문 체크(재방문 방지))
        let path = []; // 현재 가고 있는 경로 저장

        for (let [a, b] of arr) {
          graph[a].push(b);
        }
        // let graph = [ [], [2,3,4], [1,3,5], [4], [2,5], [] ];

        function DFS(v) {
          if (v === n) {
            answer++;
            console.log(path);
          } else {
            for (let i = 0; i < graph[v].length; i++) {
              // 갈 수 있는 길만 확인
              if (ch[graph[v][i]] === 0) {
                // 아직 방문하지 않았다면
                ch[graph[v][i]] = 1;
                path.push(graph[v][i]);
                DFS(graph[v][i]);
                ch[graph[v][i]] = 0;
                path.pop();
              }
            }
          }
        }

        path.push(1);
        ch[1] = 1;
        DFS(1);

        return answer;
      }

      let arr = [
        [1, 2],
        [1, 3],
        [1, 4],
        [2, 1],
        [2, 3],
        [2, 5],
        [3, 4],
        [4, 2],
        [4, 5],
      ];

      console.log(solution(5, arr));

      // 실행 결과
      // n = 5, v = 1
      // path = [1,2]
      //   path = [1,2,3]
      //     path = [1,2,3,4]
      //       path = [1,2,3,4,5] -> answer++
      //     path = [1,2,3]
      //   path = [1,2]
      //     path = [1,2,5] -> answer++
      //   path = [1,2]
      // path = [1,3]
      //   path = [1,3,4]
      //     path = [1,3,4,5] -> answer++
      //   path = [1,3,4]
      //     path = [1,3,4,2]
      //       path = [1,3,4,2,5] -> answer++
      //     path = [1,3,4,2]
      //   path = [1,3]
      // path = [1,4]
      //   path = [1,4,2]
      //     path = [1,4,2,3]
      //       path = [1,4,2,3,4] -> 방문 체크 되어 진행 X
      //     path = [1,4,2]
      //       path = [1,4,2,5] -> answer++
      //   path = [1,4]
      //     path = [1,4,5] -> answer++
      // answer = 6
    </script>
  </head>
  <body></body>
</html>
